{% extends 'userbase.html' %}

{% block title%}User Dashboard{% endblock title%}
{% block body %}

<div class="container-fluid  bg-light p-5 mt-3">
    <div class="row">
        <div class="col-lg-4 offset-lg-4 text-center">
            <div class="border bg-primary text-light pt-5 pb-5 rounded">
                <p>Name : {{new.patientname}}</p>
                <p>Application Id : {{aptid}}</p>
                <p>Amount Payable : {{amt.amount}}</p>
            </div>
            
            <form id="autosubmit" action="" method="POST">
                {% csrf_token %}
                <p>Chose Payment Mode</p>
                <input type="radio" name="pay" id="cod" value="cod">
                <label for="cod" class="pr-2" >Cash On Delivery</label>
                <input type="radio" name="pay" id="online" class="online" value="online">
                <label for="online">Pay Online</label>
                <input type="hidden" name="id" value="{{aptid}}">
                <br>
                <button type="submit" class="btn btn-primary">Proceed</button>
            </form>

            
            {%if payment %}
            <form action="{% url 'success' %}" method="POST">
                <script
                    src="https://checkout.razorpay.com/v1/checkout.js"
                    data-key="rzp_test_FO6OeouYXvVlwh" // Enter the Test API Key ID generated from Dashboard → Settings → API Keys
                    data-amount="{amt.amount}" // Amount is in currency subunits. Hence, 29935 refers to 29935 paise or ₹299.35.
                    data-currency="INR"//You can accept international payments by changing the currency code. Contact our Support Team to enable International for your account
                    data-order_id="{{payment.id}}"//Replace with the order_id generated by you in the backend.
                    data-buttontext="Pay Online Now"
                    data-name="OLMS"
                    data-description="Simplifying the way your Testing Process"
                    data-image="https://example.com/your_logo.jpg"
                    data-prefill.name="itsumarashraf"
                    data-prefill.email="itsumarashraf@gmail.com"
                    data-theme.color="#007bff"
                ></script>
                <input type="hidden" custom="Hidden Element" name="hidden">
                <input type="hidden" value="{{aptid}}" name="getid">
                </form>
            {% endif %}


            <!-- <script>
                window.onload = function () {
                document.forms['autosubmit'].submit();
                }
                </script> -->
        </div>
    </div>
</div>

{% endblock body %}
<!-- <p>Hello this is the payment gateway for  with application id  for inr  by {{new.user_id}} 
        currently logged in user is {{request.session.userlogged}}
    </p> -->